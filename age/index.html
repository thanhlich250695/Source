<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Adtima Accuracy Survey</title>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
        <meta name="description" content="Description here" />
        <link
            href="https://fonts.googleapis.com/css?family=Montserrat:400,500,700&display=swap&subset=vietnamese"
            rel="stylesheet"
		/>
		<link href="https://fonts.googleapis.com/css2?family=Muli:wght@400;500;600;700&display=swap" rel="stylesheet">
        <link href="css/style.css" rel="stylesheet" type="text/css" />
    </head>
    <body class="adtima-survey">
		<div class="ad-survey mastheadPC" style="width:720px; height:1280px;background-image:url(images/img_bg_720x1280.png);background-size:720px 1280px">
            <a class="adtima">
                <img src="images/adtima.png" alt="Adtima" class="img-fluid" />
            </a>
            <div class="container justify-center align-center" style="max-width: 720px; width: 100%">
                <div class="column-survey flex-grow text-center relaive">

                    <div class="step step2 active">
                        <h1 class="el" id="age">Bạn nằm trong lứa tuổi phải không?</h1>
                        <div class="g-button el">
                            <div class="btn btn-vote action2a" id="choose-happy">
                                <i class="icon-happy"></i>
                                Đúng rồi
                            </div>
                            <div class="btn btn-vote action2b" id="choose-sad">
                                <i class="icon-sad"></i>
                                Không phải nha
                            </div>
                            <div class="txt">Chọn đáp án và bấm GỬI</div>
                            <div class="g-button">
                                <div class="btn btn-send">GỬI</div>
                            </div>
                        </div>
                    </div>
                    <div class="step step2b">
                        <h1 class="el">Hãy chọn độ tuổi của bạn</h1>
                        <div class="g-button el d-flex justify-center">
                            <form action="" onsubmit="return false" class="d-flex align-center">
								<div class="f-select has-icon">
									<select class="f-control" id="browsers" style="width: 100%">
										<option disabled selected>Chọn độ tuổi</option>
										<option>18-24</option>
										<option>25-34</option>
										<option>35-44</option>
										<option>45-54</option>
										<option>55-64</option>
									</select>
								</div>
								<!-- <input id="browsers_input" list="browsers" name="browser" class="f-control year" placeholder="Chọn Năm" pattern="([0-9]{4})">
								<datalist id="browsers">
									<option value="1990">
									<option value="1991">
									<option value="1992">
									<option value="1993">
									<option value="1994">
								</datalist> -->
								<button class="btn btn-sunmit action3" id="submit" type="submit">Gửi</button>
							</form>
                        </div>
                    </div>
                    <div class="step step3">
                        <h1 class="el">Cảm ơn bạn <br>đã dành thời gian <br>giúp Adtima!</h1>
                    </div>
                </div>
            </div>
        </div>

        <script src="js/library.js" type="text/javascript"></script>
        <script>
            var age = "18-24";
            var url_link2 = "https://log.adtimaserver.vn/ext/surveySubmit?uid=3000.UPxfhOmT7vzYc_Ribmm3tc24wxx5LbkKP8JelSSVN9HbpEcwmXbLbJCmE0.1&ver=HCM_VER&data=MjUsMzQJODU5CTEJMQkwCTIJMjU4CTIwMzQ3OTQ1MjA=&answer=__answer__&content=__content__" ;
            try{
                url_link2 = dynamicData.surveySubmit;
            }catch(e){
                console.log(e);
            }

            
            anime({ targets: ".column-img", opacity: [0, 1], easing: "easeInOutSine", duration: 1200 });
			anime({
                targets: ".step2 .el",
                opacity: [0, 1],
                delay: function(el, i) {
                    return i * 100;
                },
                easing: "easeInOutSine",
                delay: 350
            });

            var tl2 = anime.timeline({ autoplay: false });
            tl2.add({
                targets: ".step2",
                opacity: [1, 0],
                duration: 250,
                easing: "easeInOutSine",
                changeComplete: function() {
                    removeClass(document.querySelector(".step2"), "active");
                    document.querySelector(".step2").style.display = "none";
                    addClass(document.querySelector(".step3"), "active");
                }
            }).add({
                targets: ".step3 .el",
                opacity: [0, 1],
                delay: function(el, i) {
                    return i * 100;
                },
                autoplay: false,
                easing: "easeInOutSine"
            });
            var tl2b = anime.timeline({ autoplay: false });
            tl2b.add({
                targets: ".step2",
                opacity: [1, 0],
                duration: 250,
                easing: "easeInOutSine",
                changeComplete: function() {
                    removeClass(document.querySelector(".step2"), "active");
                    document.querySelector(".step2").style.display = "none";
                    addClass(document.querySelector(".step2b"), "active");
                }
            }).add({
                targets: ".step2b .el",
                opacity: [0, 1],
                delay: function(el, i) {
                    return i * 100;
                },
                autoplay: false,
                easing: "easeInOutSine"
            });
            
            // document.querySelector(".action2a").onclick = tl2.play;
            // document.querySelector(".action2b").onclick = tl2b.play;

            var tl3 = anime.timeline({ autoplay: false });
            tl3.add({
                targets: ".step2b",
                opacity: [1, 0],
                duration: 250,
                easing: "easeInOutSine",
                changeComplete: function() {
                    removeClass(document.querySelector(".step2b"), "active");
                    document.querySelector(".step2b").style.display = "none";
                    addClass(document.querySelector(".step3"), "active");
                }
            }).add({
                targets: ".step3 .el",
                opacity: [0, 1],
                delay: function(el, i) {
                    return i * 100;
                },
                autoplay: false,
                easing: "easeInOutSine"
            });

            document.querySelector(".action3").onclick = tl3.play;

            document.getElementById("age").innerHTML = "Bạn nằm trong lứa tuổi <br> " + age + " phải không? ";

            var url_link1 = "https://px.za.zalo.me/tr?id=3676239907573914899";
            
			
			// document.getElementById("start").addEventListener("click", function(){
				//call_tracker(url_link1, 'start');
			// });

			document.getElementById("choose-happy").addEventListener("click", function(){
                url_link2 = url_link2.replace("__answer__",'Yes_'+age);
                //call_tracker(url_link2);
			});

			document.getElementById("choose-sad").addEventListener("click", function(){
               // url_link2 = url_link2.replace("__answer__",'No_'+age);
                //call_tracker(url_link2);
			});

            document.getElementById("submit").addEventListener("click", function() {
                url_link2 = url_link2.replace("__answer__",'No_'+age);
				var age_div = document.getElementById("browsers");
				var age_new = age_div.options[age_div.selectedIndex].value;
				//checkAge(age);
				//if(isValid&&age<=2019) {
				// call_tracker(url_link2, age);
                
				url_link2 = url_link2.replace("__content__", age_new);
				call_tracker(url_link2);
				tl2.play();
				//return;   
				//}
            });

            function call_tracker(url) {
                var img_tracking = document.createElement("img");
                // img_tracking.src = "" + url + "&event=" + parameters + "&vid=[ZVISITOR]";
                img_tracking.src = url ;
                img_tracking.style.height = "0px";
                img_tracking.style.width = "0px";
                document.body.appendChild(img_tracking);
            }
        </script>
        <script src="https://stc.interactive.brand.zing.vn/media/js/default/library/jquery.min.js"></script>
        <script>
            $(document).ready(function(){
                $( "select" ).change(function (){
                    $('.action3').addClass('active');
                    $('select').css('color', 'black');
                })
                $('.btn-vote').click(function(){
                    $('.btn-vote').removeClass('is-active').addClass('is-select');
                    $(this).addClass('is-active');
                    $('.btn-send').addClass('is-active'); 
                })
                $('.btn-send').click(function(){
                    var target = $('.btn-vote.is-active');
                    if(target.hasClass('action2a')){
                        tl2.play();
                        call_tracker(url_link2);
                    }else {
                        tl2b.play();
                    }
                })
            })
        </script>
    </body>
</html>
